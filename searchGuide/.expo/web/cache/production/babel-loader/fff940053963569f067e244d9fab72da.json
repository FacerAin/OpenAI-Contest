{"ast":null,"code":"var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _toConsumableArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf3=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var array=_interopRequireWildcard(require(\"d3-array\"));var scale=_interopRequireWildcard(require(\"d3-scale\"));var shape=_interopRequireWildcard(require(\"d3-shape\"));var _propTypes=_interopRequireDefault(require(\"prop-types\"));var _react=_interopRequireWildcard(require(\"react\"));var _View=_interopRequireDefault(require(\"react-native-web/dist/exports/View\"));var _reactNativeSvg=_interopRequireDefault(require(\"react-native-svg\"));var _animatedPath=_interopRequireDefault(require(\"../animated-path\"));var BarChart=function(_PureComponent){(0,_inherits2.default)(BarChart,_PureComponent);function BarChart(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,BarChart);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(BarChart)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={width:0,height:0};return _this;}(0,_createClass2.default)(BarChart,[{key:\"_onLayout\",value:function _onLayout(event){var _event$nativeEvent$la=event.nativeEvent.layout,height=_event$nativeEvent$la.height,width=_event$nativeEvent$la.width;this.setState({height:height,width:width});}},{key:\"calcXScale\",value:function calcXScale(domain){var _this$props=this.props,horizontal=_this$props.horizontal,_this$props$contentIn=_this$props.contentInset,_this$props$contentIn2=_this$props$contentIn.left,left=_this$props$contentIn2===void 0?0:_this$props$contentIn2,_this$props$contentIn3=_this$props$contentIn.right,right=_this$props$contentIn3===void 0?0:_this$props$contentIn3,spacingInner=_this$props.spacingInner,spacingOuter=_this$props.spacingOuter,clamp=_this$props.clamp;var width=this.state.width;if(horizontal){return scale.scaleLinear().domain(domain).range([left,width-right]).clamp(clamp);}return scale.scaleBand().domain(domain).range([left,width-right]).paddingInner([spacingInner]).paddingOuter([spacingOuter]);}},{key:\"calcYScale\",value:function calcYScale(domain){var _this$props2=this.props,horizontal=_this$props2.horizontal,_this$props2$contentI=_this$props2.contentInset,_this$props2$contentI2=_this$props2$contentI.top,top=_this$props2$contentI2===void 0?0:_this$props2$contentI2,_this$props2$contentI3=_this$props2$contentI.bottom,bottom=_this$props2$contentI3===void 0?0:_this$props2$contentI3,spacingInner=_this$props2.spacingInner,spacingOuter=_this$props2.spacingOuter,clamp=_this$props2.clamp;var height=this.state.height;if(horizontal){return scale.scaleBand().domain(domain).range([top,height-bottom]).paddingInner([spacingInner]).paddingOuter([spacingOuter]);}return scale.scaleLinear().domain(domain).range([height-bottom,top]).clamp(clamp);}},{key:\"calcAreas\",value:function calcAreas(x,y){var _this$props3=this.props,horizontal=_this$props3.horizontal,data=_this$props3.data,yAccessor=_this$props3.yAccessor;var values=data.map(function(item){return yAccessor({item:item});});if(horizontal){return data.map(function(bar,index){return{bar:bar,path:shape.area().y(function(value,_index){return _index===0?y(index):y(index)+y.bandwidth();}).x0(x(0)).x1(function(value){return x(value);}).defined(function(value){return typeof value==='number';})([values[index],values[index]])};});}return data.map(function(bar,index){return{bar:bar,path:shape.area().y0(y(0)).y1(function(value){return y(value);}).x(function(value,_index){return _index===0?x(index):x(index)+x.bandwidth();}).defined(function(value){return typeof value==='number';})([values[index],values[index]])};});}},{key:\"calcExtent\",value:function calcExtent(){var _this$props4=this.props,data=_this$props4.data,gridMin=_this$props4.gridMin,gridMax=_this$props4.gridMax,yAccessor=_this$props4.yAccessor;var values=data.map(function(obj){return yAccessor({item:obj});});var extent=array.extent([].concat((0,_toConsumableArray2.default)(values),[gridMax,gridMin]));var _this$props5=this.props,_this$props5$yMin=_this$props5.yMin,yMin=_this$props5$yMin===void 0?extent[0]:_this$props5$yMin,_this$props5$yMax=_this$props5.yMax,yMax=_this$props5$yMax===void 0?extent[1]:_this$props5$yMax;return[yMin,yMax];}},{key:\"calcIndexes\",value:function calcIndexes(){var data=this.props.data;return data.map(function(_,index){return index;});}},{key:\"render\",value:function render(){var _this2=this;var _this$props6=this.props,data=_this$props6.data,animate=_this$props6.animate,animationDuration=_this$props6.animationDuration,style=_this$props6.style,numberOfTicks=_this$props6.numberOfTicks,svg=_this$props6.svg,horizontal=_this$props6.horizontal,children=_this$props6.children;var _this$state=this.state,height=_this$state.height,width=_this$state.width;if(data.length===0){return _react.default.createElement(_View.default,{style:style});}var extent=this.calcExtent();var indexes=this.calcIndexes();var ticks=array.ticks(extent[0],extent[1],numberOfTicks);var xDomain=horizontal?extent:indexes;var yDomain=horizontal?indexes:extent;var x=this.calcXScale(xDomain);var y=this.calcYScale(yDomain);var bandwidth=horizontal?y.bandwidth():x.bandwidth();var areas=this.calcAreas(x,y).filter(function(area){return area.bar!==null&&area.bar!==undefined&&area.path!==null;});var extraProps={x:x,y:y,width:width,height:height,bandwidth:bandwidth,ticks:ticks,data:data};return _react.default.createElement(_View.default,{style:style},_react.default.createElement(_View.default,{style:{flex:1},onLayout:function onLayout(event){return _this2._onLayout(event);}},height>0&&width>0&&_react.default.createElement(_reactNativeSvg.default,{style:{height:height,width:width}},_react.default.Children.map(children,function(child){if(child&&child.props.belowChart){return _react.default.cloneElement(child,extraProps);}}),areas.map(function(area,index){var _area$bar$svg=area.bar.svg,barSvg=_area$bar$svg===void 0?{}:_area$bar$svg,path=area.path;return _react.default.createElement(_animatedPath.default,(0,_extends2.default)({key:index},svg,barSvg,{d:path,animate:animate,animationDuration:animationDuration}));}),_react.default.Children.map(children,function(child){if(child&&!child.props.belowChart){return _react.default.cloneElement(child,extraProps);}}))));}}]);return BarChart;}(_react.PureComponent);BarChart.propTypes={data:_propTypes.default.arrayOf(_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.object])).isRequired,style:_propTypes.default.any,spacingInner:_propTypes.default.number,spacingOuter:_propTypes.default.number,animate:_propTypes.default.bool,animationDuration:_propTypes.default.number,contentInset:_propTypes.default.shape({top:_propTypes.default.number,left:_propTypes.default.number,right:_propTypes.default.number,bottom:_propTypes.default.number}),numberOfTicks:_propTypes.default.number,gridMin:_propTypes.default.number,gridMax:_propTypes.default.number,svg:_propTypes.default.object,yMin:_propTypes.default.any,yMax:_propTypes.default.any,clamp:_propTypes.default.bool};BarChart.defaultProps={spacingInner:0.05,spacingOuter:0.05,contentInset:{},numberOfTicks:10,svg:{},yAccessor:function yAccessor(_ref){var item=_ref.item;return item;}};var _default=BarChart;exports.default=_default;","map":{"version":3,"sources":["C:/Users/bluej/Desktop/2_2/searchGuide/searchGuide/node_modules/react-native-svg-charts/src/bar-chart/bar-chart.js"],"names":["BarChart","state","width","height","event","nativeEvent","layout","setState","domain","props","horizontal","contentInset","left","right","spacingInner","spacingOuter","clamp","scale","scaleLinear","range","scaleBand","paddingInner","paddingOuter","top","bottom","x","y","data","yAccessor","values","map","item","bar","index","path","shape","area","value","_index","bandwidth","x0","x1","defined","y0","y1","gridMin","gridMax","obj","extent","array","yMin","yMax","_","animate","animationDuration","style","numberOfTicks","svg","children","length","calcExtent","indexes","calcIndexes","ticks","xDomain","yDomain","calcXScale","calcYScale","areas","calcAreas","filter","undefined","extraProps","flex","_onLayout","React","Children","child","belowChart","cloneElement","barSvg","PureComponent","propTypes","PropTypes","arrayOf","oneOfType","number","object","isRequired","any","bool","defaultProps"],"mappings":"s4BAAA,uDACA,uDACA,uDACA,6DACA,qD,gFAEA,wEACA,sE,GAEMA,CAAAA,Q,sbACFC,K,CAAQ,CACJC,KAAK,CAAE,CADH,CAEJC,MAAM,CAAE,CAFJ,C,6FAKEC,K,CAAO,2BAKTA,KALS,CAETC,WAFS,CAGLC,MAHK,CAGKH,MAHL,uBAGKA,MAHL,CAGaD,KAHb,uBAGaA,KAHb,CAMb,KAAKK,QAAL,CAAc,CAAEJ,MAAM,CAANA,MAAF,CAAUD,KAAK,CAALA,KAAV,CAAd,EACH,C,8CAEUM,M,CAAQ,iBAOX,KAAKC,KAPM,CAEXC,UAFW,aAEXA,UAFW,mCAGXC,YAHW,8CAGKC,IAHL,CAGKA,IAHL,iCAGY,CAHZ,qEAGeC,KAHf,CAGeA,KAHf,iCAGuB,CAHvB,wBAIXC,YAJW,aAIXA,YAJW,CAKXC,YALW,aAKXA,YALW,CAMXC,KANW,aAMXA,KANW,IASPd,CAAAA,KATO,CASG,KAAKD,KATR,CASPC,KATO,CAWf,GAAIQ,UAAJ,CAAgB,CACZ,MAAOO,CAAAA,KAAK,CACPC,WADE,GAEFV,MAFE,CAEKA,MAFL,EAGFW,KAHE,CAGI,CAACP,IAAD,CAAOV,KAAK,CAAGW,KAAf,CAHJ,EAIFG,KAJE,CAIIA,KAJJ,CAAP,CAKH,CAED,MAAOC,CAAAA,KAAK,CACPG,SADE,GAEFZ,MAFE,CAEKA,MAFL,EAGFW,KAHE,CAGI,CAACP,IAAD,CAAOV,KAAK,CAAGW,KAAf,CAHJ,EAIFQ,YAJE,CAIW,CAACP,YAAD,CAJX,EAKFQ,YALE,CAKW,CAACP,YAAD,CALX,CAAP,CAMH,C,8CAEUP,M,CAAQ,kBAOX,KAAKC,KAPM,CAEXC,UAFW,cAEXA,UAFW,oCAGXC,YAHW,8CAGKY,GAHL,CAGKA,GAHL,iCAGW,CAHX,qEAGcC,MAHd,CAGcA,MAHd,iCAGuB,CAHvB,wBAIXV,YAJW,cAIXA,YAJW,CAKXC,YALW,cAKXA,YALW,CAMXC,KANW,cAMXA,KANW,IASPb,CAAAA,MATO,CASI,KAAKF,KATT,CASPE,MATO,CAWf,GAAIO,UAAJ,CAAgB,CACZ,MAAOO,CAAAA,KAAK,CACPG,SADE,GAEFZ,MAFE,CAEKA,MAFL,EAGFW,KAHE,CAGI,CAACI,GAAD,CAAMpB,MAAM,CAAGqB,MAAf,CAHJ,EAIFH,YAJE,CAIW,CAACP,YAAD,CAJX,EAKFQ,YALE,CAKW,CAACP,YAAD,CALX,CAAP,CAMH,CAED,MAAOE,CAAAA,KAAK,CACPC,WADE,GAEFV,MAFE,CAEKA,MAFL,EAGFW,KAHE,CAGI,CAAChB,MAAM,CAAGqB,MAAV,CAAkBD,GAAlB,CAHJ,EAIFP,KAJE,CAIIA,KAJJ,CAAP,CAKH,C,4CAESS,C,CAAGC,C,CAAG,kBAC4B,KAAKjB,KADjC,CACJC,UADI,cACJA,UADI,CACQiB,IADR,cACQA,IADR,CACcC,SADd,cACcA,SADd,CAGZ,GAAMC,CAAAA,MAAM,CAAGF,IAAI,CAACG,GAAL,CAAS,SAACC,IAAD,QAAUH,CAAAA,SAAS,CAAC,CAAEG,IAAI,CAAJA,IAAF,CAAD,CAAnB,EAAT,CAAf,CAEA,GAAIrB,UAAJ,CAAgB,CACZ,MAAOiB,CAAAA,IAAI,CAACG,GAAL,CAAS,SAACE,GAAD,CAAMC,KAAN,QAAiB,CAC7BD,GAAG,CAAHA,GAD6B,CAE7BE,IAAI,CAAEC,KAAK,CACNC,IADC,GAEDV,CAFC,CAEC,SAACW,KAAD,CAAQC,MAAR,QAAoBA,CAAAA,MAAM,GAAK,CAAX,CAAeZ,CAAC,CAACO,KAAD,CAAhB,CAA0BP,CAAC,CAACO,KAAD,CAAD,CAAWP,CAAC,CAACa,SAAF,EAAzD,EAFD,EAGDC,EAHC,CAGEf,CAAC,CAAC,CAAD,CAHH,EAIDgB,EAJC,CAIE,SAACJ,KAAD,QAAWZ,CAAAA,CAAC,CAACY,KAAD,CAAZ,EAJF,EAKDK,OALC,CAKO,SAACL,KAAD,QAAW,OAAOA,CAAAA,KAAP,GAAiB,QAA5B,EALP,EAK6C,CAACR,MAAM,CAACI,KAAD,CAAP,CAAgBJ,MAAM,CAACI,KAAD,CAAtB,CAL7C,CAFuB,CAAjB,EAAT,CAAP,CASH,CAED,MAAON,CAAAA,IAAI,CAACG,GAAL,CAAS,SAACE,GAAD,CAAMC,KAAN,QAAiB,CAC7BD,GAAG,CAAHA,GAD6B,CAE7BE,IAAI,CAAEC,KAAK,CACNC,IADC,GAEDO,EAFC,CAEEjB,CAAC,CAAC,CAAD,CAFH,EAGDkB,EAHC,CAGE,SAACP,KAAD,QAAWX,CAAAA,CAAC,CAACW,KAAD,CAAZ,EAHF,EAIDZ,CAJC,CAIC,SAACY,KAAD,CAAQC,MAAR,QAAoBA,CAAAA,MAAM,GAAK,CAAX,CAAeb,CAAC,CAACQ,KAAD,CAAhB,CAA0BR,CAAC,CAACQ,KAAD,CAAD,CAAWR,CAAC,CAACc,SAAF,EAAzD,EAJD,EAKDG,OALC,CAKO,SAACL,KAAD,QAAW,OAAOA,CAAAA,KAAP,GAAiB,QAA5B,EALP,EAK6C,CAACR,MAAM,CAACI,KAAD,CAAP,CAAgBJ,MAAM,CAACI,KAAD,CAAtB,CAL7C,CAFuB,CAAjB,EAAT,CAAP,CASH,C,+CAEY,kBACqC,KAAKxB,KAD1C,CACDkB,IADC,cACDA,IADC,CACKkB,OADL,cACKA,OADL,CACcC,OADd,cACcA,OADd,CACuBlB,SADvB,cACuBA,SADvB,CAET,GAAMC,CAAAA,MAAM,CAAGF,IAAI,CAACG,GAAL,CAAS,SAACiB,GAAD,QAASnB,CAAAA,SAAS,CAAC,CAAEG,IAAI,CAAEgB,GAAR,CAAD,CAAlB,EAAT,CAAf,CAEA,GAAMC,CAAAA,MAAM,CAAGC,KAAK,CAACD,MAAN,2CAAiBnB,MAAjB,GAAyBiB,OAAzB,CAAkCD,OAAlC,GAAf,CAJS,iBAMsC,KAAKpC,KAN3C,gCAMDyC,IANC,CAMDA,IANC,4BAMMF,MAAM,CAAC,CAAD,CANZ,kDAMiBG,IANjB,CAMiBA,IANjB,4BAMwBH,MAAM,CAAC,CAAD,CAN9B,mBAQT,MAAO,CAACE,IAAD,CAAOC,IAAP,CAAP,CACH,C,iDAEa,IACFxB,CAAAA,IADE,CACO,KAAKlB,KADZ,CACFkB,IADE,CAEV,MAAOA,CAAAA,IAAI,CAACG,GAAL,CAAS,SAACsB,CAAD,CAAInB,KAAJ,QAAcA,CAAAA,KAAd,EAAT,CAAP,CACH,C,uCAEQ,kCACyF,KAAKxB,KAD9F,CACGkB,IADH,cACGA,IADH,CACS0B,OADT,cACSA,OADT,CACkBC,iBADlB,cACkBA,iBADlB,CACqCC,KADrC,cACqCA,KADrC,CAC4CC,aAD5C,cAC4CA,aAD5C,CAC2DC,GAD3D,cAC2DA,GAD3D,CACgE/C,UADhE,cACgEA,UADhE,CAC4EgD,QAD5E,cAC4EA,QAD5E,iBAGqB,KAAKzD,KAH1B,CAGGE,MAHH,aAGGA,MAHH,CAGWD,KAHX,aAGWA,KAHX,CAKL,GAAIyB,IAAI,CAACgC,MAAL,GAAgB,CAApB,CAAuB,CACnB,MAAO,8BAAC,aAAD,EAAM,KAAK,CAAEJ,KAAb,EAAP,CACH,CAED,GAAMP,CAAAA,MAAM,CAAG,KAAKY,UAAL,EAAf,CACA,GAAMC,CAAAA,OAAO,CAAG,KAAKC,WAAL,EAAhB,CACA,GAAMC,CAAAA,KAAK,CAAGd,KAAK,CAACc,KAAN,CAAYf,MAAM,CAAC,CAAD,CAAlB,CAAuBA,MAAM,CAAC,CAAD,CAA7B,CAAkCQ,aAAlC,CAAd,CAEA,GAAMQ,CAAAA,OAAO,CAAGtD,UAAU,CAAGsC,MAAH,CAAYa,OAAtC,CACA,GAAMI,CAAAA,OAAO,CAAGvD,UAAU,CAAGmD,OAAH,CAAab,MAAvC,CAEA,GAAMvB,CAAAA,CAAC,CAAG,KAAKyC,UAAL,CAAgBF,OAAhB,CAAV,CACA,GAAMtC,CAAAA,CAAC,CAAG,KAAKyC,UAAL,CAAgBF,OAAhB,CAAV,CAEA,GAAM1B,CAAAA,SAAS,CAAG7B,UAAU,CAAGgB,CAAC,CAACa,SAAF,EAAH,CAAmBd,CAAC,CAACc,SAAF,EAA/C,CAEA,GAAM6B,CAAAA,KAAK,CAAG,KAAKC,SAAL,CAAe5C,CAAf,CAAkBC,CAAlB,EAAqB4C,MAArB,CACV,SAAClC,IAAD,QAAUA,CAAAA,IAAI,CAACJ,GAAL,GAAa,IAAb,EAAqBI,IAAI,CAACJ,GAAL,GAAauC,SAAlC,EAA+CnC,IAAI,CAACF,IAAL,GAAc,IAAvE,EADU,CAAd,CAIA,GAAMsC,CAAAA,UAAU,CAAG,CACf/C,CAAC,CAADA,CADe,CAEfC,CAAC,CAADA,CAFe,CAGfxB,KAAK,CAALA,KAHe,CAIfC,MAAM,CAANA,MAJe,CAKfoC,SAAS,CAATA,SALe,CAMfwB,KAAK,CAALA,KANe,CAOfpC,IAAI,CAAJA,IAPe,CAAnB,CAUA,MACI,8BAAC,aAAD,EAAM,KAAK,CAAE4B,KAAb,EACI,6BAAC,aAAD,EAAM,KAAK,CAAE,CAAEkB,IAAI,CAAE,CAAR,CAAb,CAA0B,QAAQ,CAAE,kBAACrE,KAAD,QAAW,CAAA,MAAI,CAACsE,SAAL,CAAetE,KAAf,CAAX,EAApC,EACKD,MAAM,CAAG,CAAT,EAAcD,KAAK,CAAG,CAAtB,EACG,6BAAC,uBAAD,EAAK,KAAK,CAAE,CAAEC,MAAM,CAANA,MAAF,CAAUD,KAAK,CAALA,KAAV,CAAZ,EACKyE,eAAMC,QAAN,CAAe9C,GAAf,CAAmB4B,QAAnB,CAA6B,SAACmB,KAAD,CAAW,CACrC,GAAIA,KAAK,EAAIA,KAAK,CAACpE,KAAN,CAAYqE,UAAzB,CAAqC,CACjC,MAAOH,gBAAMI,YAAN,CAAmBF,KAAnB,CAA0BL,UAA1B,CAAP,CACH,CACJ,CAJA,CADL,CAMKJ,KAAK,CAACtC,GAAN,CAAU,SAACM,IAAD,CAAOH,KAAP,CAAiB,mBAIpBG,IAJoB,CAEpBJ,GAFoB,CAEbyB,GAFa,CAERuB,MAFQ,wBAEC,EAFD,eAGpB9C,IAHoB,CAIpBE,IAJoB,CAGpBF,IAHoB,CAMxB,MACI,8BAAC,qBAAD,wBACI,GAAG,CAAED,KADT,EAEQwB,GAFR,CAGQuB,MAHR,EAII,CAAC,CAAE9C,IAJP,CAKI,OAAO,CAAEmB,OALb,CAMI,iBAAiB,CAAEC,iBANvB,GADJ,CAUH,CAhBA,CANL,CAuBKqB,eAAMC,QAAN,CAAe9C,GAAf,CAAmB4B,QAAnB,CAA6B,SAACmB,KAAD,CAAW,CACrC,GAAIA,KAAK,EAAI,CAACA,KAAK,CAACpE,KAAN,CAAYqE,UAA1B,CAAsC,CAClC,MAAOH,gBAAMI,YAAN,CAAmBF,KAAnB,CAA0BL,UAA1B,CAAP,CACH,CACJ,CAJA,CAvBL,CAFR,CADJ,CADJ,CAqCH,C,sBAzLkBS,oB,EA4LvBjF,QAAQ,CAACkF,SAAT,CAAqB,CACjBvD,IAAI,CAAEwD,mBAAUC,OAAV,CAAkBD,mBAAUE,SAAV,CAAoB,CAACF,mBAAUG,MAAX,CAAmBH,mBAAUI,MAA7B,CAApB,CAAlB,EAA6EC,UADlE,CAEjBjC,KAAK,CAAE4B,mBAAUM,GAFA,CAGjB3E,YAAY,CAAEqE,mBAAUG,MAHP,CAIjBvE,YAAY,CAAEoE,mBAAUG,MAJP,CAKjBjC,OAAO,CAAE8B,mBAAUO,IALF,CAMjBpC,iBAAiB,CAAE6B,mBAAUG,MANZ,CAOjB3E,YAAY,CAAEwE,mBAAUhD,KAAV,CAAgB,CAC1BZ,GAAG,CAAE4D,mBAAUG,MADW,CAE1B1E,IAAI,CAAEuE,mBAAUG,MAFU,CAG1BzE,KAAK,CAAEsE,mBAAUG,MAHS,CAI1B9D,MAAM,CAAE2D,mBAAUG,MAJQ,CAAhB,CAPG,CAajB9B,aAAa,CAAE2B,mBAAUG,MAbR,CAcjBzC,OAAO,CAAEsC,mBAAUG,MAdF,CAejBxC,OAAO,CAAEqC,mBAAUG,MAfF,CAgBjB7B,GAAG,CAAE0B,mBAAUI,MAhBE,CAkBjBrC,IAAI,CAAEiC,mBAAUM,GAlBC,CAmBjBtC,IAAI,CAAEgC,mBAAUM,GAnBC,CAoBjBzE,KAAK,CAAEmE,mBAAUO,IApBA,CAArB,CAuBA1F,QAAQ,CAAC2F,YAAT,CAAwB,CACpB7E,YAAY,CAAE,IADM,CAEpBC,YAAY,CAAE,IAFM,CAGpBJ,YAAY,CAAE,EAHM,CAIpB6C,aAAa,CAAE,EAJK,CAKpBC,GAAG,CAAE,EALe,CAMpB7B,SAAS,CAAE,4BAAGG,CAAAA,IAAH,MAAGA,IAAH,OAAcA,CAAAA,IAAd,EANS,CAAxB,C,aASe/B,Q","sourcesContent":["import * as array from 'd3-array'\nimport * as scale from 'd3-scale'\nimport * as shape from 'd3-shape'\nimport PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\nimport { View } from 'react-native'\nimport Svg from 'react-native-svg'\nimport Path from '../animated-path'\n\nclass BarChart extends PureComponent {\n    state = {\n        width: 0,\n        height: 0,\n    }\n\n    _onLayout(event) {\n        const {\n            nativeEvent: {\n                layout: { height, width },\n            },\n        } = event\n        this.setState({ height, width })\n    }\n\n    calcXScale(domain) {\n        const {\n            horizontal,\n            contentInset: { left = 0, right = 0 },\n            spacingInner,\n            spacingOuter,\n            clamp,\n        } = this.props\n\n        const { width } = this.state\n\n        if (horizontal) {\n            return scale\n                .scaleLinear()\n                .domain(domain)\n                .range([left, width - right])\n                .clamp(clamp)\n        }\n\n        return scale\n            .scaleBand()\n            .domain(domain)\n            .range([left, width - right])\n            .paddingInner([spacingInner])\n            .paddingOuter([spacingOuter])\n    }\n\n    calcYScale(domain) {\n        const {\n            horizontal,\n            contentInset: { top = 0, bottom = 0 },\n            spacingInner,\n            spacingOuter,\n            clamp,\n        } = this.props\n\n        const { height } = this.state\n\n        if (horizontal) {\n            return scale\n                .scaleBand()\n                .domain(domain)\n                .range([top, height - bottom])\n                .paddingInner([spacingInner])\n                .paddingOuter([spacingOuter])\n        }\n\n        return scale\n            .scaleLinear()\n            .domain(domain)\n            .range([height - bottom, top])\n            .clamp(clamp)\n    }\n\n    calcAreas(x, y) {\n        const { horizontal, data, yAccessor } = this.props\n\n        const values = data.map((item) => yAccessor({ item }))\n\n        if (horizontal) {\n            return data.map((bar, index) => ({\n                bar,\n                path: shape\n                    .area()\n                    .y((value, _index) => (_index === 0 ? y(index) : y(index) + y.bandwidth()))\n                    .x0(x(0))\n                    .x1((value) => x(value))\n                    .defined((value) => typeof value === 'number')([values[index], values[index]]),\n            }))\n        }\n\n        return data.map((bar, index) => ({\n            bar,\n            path: shape\n                .area()\n                .y0(y(0))\n                .y1((value) => y(value))\n                .x((value, _index) => (_index === 0 ? x(index) : x(index) + x.bandwidth()))\n                .defined((value) => typeof value === 'number')([values[index], values[index]]),\n        }))\n    }\n\n    calcExtent() {\n        const { data, gridMin, gridMax, yAccessor } = this.props\n        const values = data.map((obj) => yAccessor({ item: obj }))\n\n        const extent = array.extent([...values, gridMax, gridMin])\n\n        const { yMin = extent[0], yMax = extent[1] } = this.props\n\n        return [yMin, yMax]\n    }\n\n    calcIndexes() {\n        const { data } = this.props\n        return data.map((_, index) => index)\n    }\n\n    render() {\n        const { data, animate, animationDuration, style, numberOfTicks, svg, horizontal, children } = this.props\n\n        const { height, width } = this.state\n\n        if (data.length === 0) {\n            return <View style={style} />\n        }\n\n        const extent = this.calcExtent()\n        const indexes = this.calcIndexes()\n        const ticks = array.ticks(extent[0], extent[1], numberOfTicks)\n\n        const xDomain = horizontal ? extent : indexes\n        const yDomain = horizontal ? indexes : extent\n\n        const x = this.calcXScale(xDomain)\n        const y = this.calcYScale(yDomain)\n\n        const bandwidth = horizontal ? y.bandwidth() : x.bandwidth()\n\n        const areas = this.calcAreas(x, y).filter(\n            (area) => area.bar !== null && area.bar !== undefined && area.path !== null\n        )\n\n        const extraProps = {\n            x,\n            y,\n            width,\n            height,\n            bandwidth,\n            ticks,\n            data,\n        }\n\n        return (\n            <View style={style}>\n                <View style={{ flex: 1 }} onLayout={(event) => this._onLayout(event)}>\n                    {height > 0 && width > 0 && (\n                        <Svg style={{ height, width }}>\n                            {React.Children.map(children, (child) => {\n                                if (child && child.props.belowChart) {\n                                    return React.cloneElement(child, extraProps)\n                                }\n                            })}\n                            {areas.map((area, index) => {\n                                const {\n                                    bar: { svg: barSvg = {} },\n                                    path,\n                                } = area\n\n                                return (\n                                    <Path\n                                        key={index}\n                                        {...svg}\n                                        {...barSvg}\n                                        d={path}\n                                        animate={animate}\n                                        animationDuration={animationDuration}\n                                    />\n                                )\n                            })}\n                            {React.Children.map(children, (child) => {\n                                if (child && !child.props.belowChart) {\n                                    return React.cloneElement(child, extraProps)\n                                }\n                            })}\n                        </Svg>\n                    )}\n                </View>\n            </View>\n        )\n    }\n}\n\nBarChart.propTypes = {\n    data: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.object])).isRequired,\n    style: PropTypes.any,\n    spacingInner: PropTypes.number,\n    spacingOuter: PropTypes.number,\n    animate: PropTypes.bool,\n    animationDuration: PropTypes.number,\n    contentInset: PropTypes.shape({\n        top: PropTypes.number,\n        left: PropTypes.number,\n        right: PropTypes.number,\n        bottom: PropTypes.number,\n    }),\n    numberOfTicks: PropTypes.number,\n    gridMin: PropTypes.number,\n    gridMax: PropTypes.number,\n    svg: PropTypes.object,\n\n    yMin: PropTypes.any,\n    yMax: PropTypes.any,\n    clamp: PropTypes.bool,\n}\n\nBarChart.defaultProps = {\n    spacingInner: 0.05,\n    spacingOuter: 0.05,\n    contentInset: {},\n    numberOfTicks: 10,\n    svg: {},\n    yAccessor: ({ item }) => item,\n}\n\nexport default BarChart\n"]},"metadata":{},"sourceType":"script"}