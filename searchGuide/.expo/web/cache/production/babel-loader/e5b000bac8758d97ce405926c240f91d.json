{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=createAnimatedComponent;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _react=_interopRequireDefault(require(\"react\"));var _findNodeHandle=_interopRequireDefault(require(\"react-native-web/dist/exports/findNodeHandle\"));var _Platform=_interopRequireDefault(require(\"react-native-web/dist/exports/Platform\"));var _StyleSheet=_interopRequireDefault(require(\"react-native-web/dist/exports/StyleSheet\"));var _ReanimatedEventEmitter=_interopRequireDefault(require(\"./ReanimatedEventEmitter\"));var _AnimatedEvent=_interopRequireDefault(require(\"./core/AnimatedEvent\"));var _AnimatedNode=_interopRequireDefault(require(\"./core/AnimatedNode\"));var _AnimatedProps=require(\"./core/AnimatedProps\");var _invariant=_interopRequireDefault(require(\"fbjs/lib/invariant\"));var NODE_MAPPING=new Map();function listener(data){var component=NODE_MAPPING.get(data.viewTag);component&&component._updateFromNative(data.props);}function createAnimatedComponent(Component){(0,_invariant.default)(typeof Component!=='function'||Component.prototype&&Component.prototype.isReactComponent,'`createAnimatedComponent` does not support stateless functional components; '+'use a class component instead.');var AnimatedComponent=function(_React$Component){(0,_inherits2.default)(AnimatedComponent,_React$Component);function AnimatedComponent(props){var _this;(0,_classCallCheck2.default)(this,AnimatedComponent);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(AnimatedComponent).call(this,props));_this._invokeAnimatedPropsCallbackOnMount=false;_this._animatedPropsCallback=function(){if(_this._component==null){_this._invokeAnimatedPropsCallbackOnMount=true;}else if(typeof _this._component.setNativeProps!=='function'){_this.forceUpdate();}else{_this._component.setNativeProps(_this._propsAnimated.__getValue());}};_this._setComponentRef=function(c){if(c!==_this._component){_this._component=c;}};_this._attachProps(_this.props);return _this;}(0,_createClass2.default)(AnimatedComponent,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._detachPropUpdater();this._propsAnimated&&this._propsAnimated.__detach();this._detachNativeEvents();}},{key:\"setNativeProps\",value:function setNativeProps(props){this._component.setNativeProps(props);}},{key:\"componentDidMount\",value:function componentDidMount(){if(this._invokeAnimatedPropsCallbackOnMount){this._invokeAnimatedPropsCallbackOnMount=false;this._animatedPropsCallback();}this._propsAnimated.setNativeView(this._component);this._attachNativeEvents();this._attachPropUpdater();}},{key:\"_getEventViewRef\",value:function _getEventViewRef(){return this._component.getScrollableNode?this._component.getScrollableNode():this._component;}},{key:\"_attachNativeEvents\",value:function _attachNativeEvents(){var node=this._getEventViewRef();for(var key in this.props){var prop=this.props[key];if(prop instanceof _AnimatedEvent.default){prop.attachEvent(node,key);}}}},{key:\"_detachNativeEvents\",value:function _detachNativeEvents(){var node=this._getEventViewRef();for(var key in this.props){var prop=this.props[key];if(prop instanceof _AnimatedEvent.default){prop.detachEvent(node,key);}}}},{key:\"_reattachNativeEvents\",value:function _reattachNativeEvents(prevProps){var node=this._getEventViewRef();var attached=new Set();var nextEvts=new Set();for(var key in this.props){var prop=this.props[key];if(prop instanceof _AnimatedEvent.default){nextEvts.add(prop.__nodeID);}}for(var _key in prevProps){var _prop=this.props[_key];if(_prop instanceof _AnimatedEvent.default){if(!nextEvts.has(_prop.__nodeID)){_prop.detachEvent(node,_key);}else{attached.add(_prop.__nodeID);}}}for(var _key2 in this.props){var _prop2=this.props[_key2];if(_prop2 instanceof _AnimatedEvent.default&&!attached.has(_prop2.__nodeID)){_prop2.attachEvent(node,_key2);}}}},{key:\"_attachProps\",value:function _attachProps(nextProps){var oldPropsAnimated=this._propsAnimated;this._propsAnimated=(0,_AnimatedProps.createOrReusePropsNode)(nextProps,this._animatedPropsCallback,oldPropsAnimated);if(oldPropsAnimated!==this._propsAnimated){oldPropsAnimated&&oldPropsAnimated.__detach();}}},{key:\"_updateFromNative\",value:function _updateFromNative(props){this._component.setNativeProps(props);}},{key:\"_attachPropUpdater\",value:function _attachPropUpdater(){var viewTag=(0,_findNodeHandle.default)(this);NODE_MAPPING.set(viewTag,this);if(NODE_MAPPING.size===1){_ReanimatedEventEmitter.default.addListener('onReanimatedPropsChange',listener);}}},{key:\"_detachPropUpdater\",value:function _detachPropUpdater(){var viewTag=(0,_findNodeHandle.default)(this);NODE_MAPPING.delete(viewTag);if(NODE_MAPPING.size===0){_ReanimatedEventEmitter.default.removeAllListeners('onReanimatedPropsChange');}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){this._attachProps(this.props);this._reattachNativeEvents(prevProps);this._propsAnimated.setNativeView(this._component);}},{key:\"_filterNonAnimatedStyle\",value:function _filterNonAnimatedStyle(inputStyle){var style={};for(var key in inputStyle){var value=inputStyle[key];if(!(value instanceof _AnimatedNode.default)&&key!=='transform'){style[key]=value;}}return style;}},{key:\"_filterNonAnimatedProps\",value:function _filterNonAnimatedProps(inputProps){var props={};for(var key in inputProps){var value=inputProps[key];if(key==='style'){props[key]=this._filterNonAnimatedStyle(_StyleSheet.default.flatten(value));}else if(!(value instanceof _AnimatedNode.default)){props[key]=value;}}return props;}},{key:\"render\",value:function render(){var props=this._filterNonAnimatedProps(this.props);var platformProps=_Platform.default.select({web:{},default:{collapsable:false}});return _react.default.createElement(Component,(0,_extends2.default)({},props,{ref:this._setComponentRef},platformProps));}},{key:\"getNode\",value:function getNode(){return this._component;}}]);return AnimatedComponent;}(_react.default.Component);return AnimatedComponent;}","map":{"version":3,"sources":["C:/Users/bluej/Desktop/2_2/searchGuide/searchGuide/node_modules/react-native-reanimated/src/createAnimatedComponent.js"],"names":["NODE_MAPPING","Map","listener","data","component","get","viewTag","_updateFromNative","props","createAnimatedComponent","Component","prototype","isReactComponent","AnimatedComponent","_invokeAnimatedPropsCallbackOnMount","_animatedPropsCallback","_component","setNativeProps","forceUpdate","_propsAnimated","__getValue","_setComponentRef","c","_attachProps","_detachPropUpdater","__detach","_detachNativeEvents","setNativeView","_attachNativeEvents","_attachPropUpdater","getScrollableNode","node","_getEventViewRef","key","prop","AnimatedEvent","attachEvent","detachEvent","prevProps","attached","Set","nextEvts","add","__nodeID","has","nextProps","oldPropsAnimated","set","size","ReanimatedEventEmitter","addListener","delete","removeAllListeners","_reattachNativeEvents","inputStyle","style","value","AnimatedNode","inputProps","_filterNonAnimatedStyle","StyleSheet","flatten","_filterNonAnimatedProps","platformProps","Platform","select","web","default","collapsable","React"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { findNodeHandle, Platform, StyleSheet } from 'react-native';\nimport ReanimatedEventEmitter from './ReanimatedEventEmitter';\n\nimport AnimatedEvent from './core/AnimatedEvent';\nimport AnimatedNode from './core/AnimatedNode';\nimport { createOrReusePropsNode } from './core/AnimatedProps';\n\nimport invariant from 'fbjs/lib/invariant';\n\nconst NODE_MAPPING = new Map();\n\nfunction listener(data) {\n  const component = NODE_MAPPING.get(data.viewTag);\n  component && component._updateFromNative(data.props);\n}\n\nexport default function createAnimatedComponent(Component) {\n  invariant(\n    typeof Component !== 'function' ||\n      (Component.prototype && Component.prototype.isReactComponent),\n    '`createAnimatedComponent` does not support stateless functional components; ' +\n      'use a class component instead.'\n  );\n\n  class AnimatedComponent extends React.Component {\n    _invokeAnimatedPropsCallbackOnMount = false;\n\n    constructor(props) {\n      super(props);\n      this._attachProps(this.props);\n    }\n\n    componentWillUnmount() {\n      this._detachPropUpdater();\n      this._propsAnimated && this._propsAnimated.__detach();\n      this._detachNativeEvents();\n    }\n\n    setNativeProps(props) {\n      this._component.setNativeProps(props);\n    }\n\n    componentDidMount() {\n      if (this._invokeAnimatedPropsCallbackOnMount) {\n        this._invokeAnimatedPropsCallbackOnMount = false;\n        this._animatedPropsCallback();\n      }\n\n      this._propsAnimated.setNativeView(this._component);\n      this._attachNativeEvents();\n      this._attachPropUpdater();\n    }\n\n    _getEventViewRef() {\n      // Make sure to get the scrollable node for components that implement\n      // `ScrollResponder.Mixin`.\n      return this._component.getScrollableNode\n        ? this._component.getScrollableNode()\n        : this._component;\n    }\n\n    _attachNativeEvents() {\n      const node = this._getEventViewRef();\n\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (prop instanceof AnimatedEvent) {\n          prop.attachEvent(node, key);\n        }\n      }\n    }\n\n    _detachNativeEvents() {\n      const node = this._getEventViewRef();\n\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (prop instanceof AnimatedEvent) {\n          prop.detachEvent(node, key);\n        }\n      }\n    }\n\n    _reattachNativeEvents(prevProps) {\n      const node = this._getEventViewRef();\n      const attached = new Set();\n      const nextEvts = new Set();\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (prop instanceof AnimatedEvent) {\n          nextEvts.add(prop.__nodeID);\n        }\n      }\n      for (const key in prevProps) {\n        const prop = this.props[key];\n        if (prop instanceof AnimatedEvent) {\n          if (!nextEvts.has(prop.__nodeID)) {\n            // event was in prev props but not in current props, we detach\n            prop.detachEvent(node, key);\n          } else {\n            // event was in prev and is still in current props\n            attached.add(prop.__nodeID);\n          }\n        }\n      }\n      for (const key in this.props) {\n        const prop = this.props[key];\n        if (prop instanceof AnimatedEvent && !attached.has(prop.__nodeID)) {\n          // not yet attached\n          prop.attachEvent(node, key);\n        }\n      }\n    }\n\n    // The system is best designed when setNativeProps is implemented. It is\n    // able to avoid re-rendering and directly set the attributes that changed.\n    // However, setNativeProps can only be implemented on native components\n    // If you want to animate a composite component, you need to re-render it.\n    // In this case, we have a fallback that uses forceUpdate.\n    _animatedPropsCallback = () => {\n      if (this._component == null) {\n        // AnimatedProps is created in will-mount because it's used in render.\n        // But this callback may be invoked before mount in async mode,\n        // In which case we should defer the setNativeProps() call.\n        // React may throw away uncommitted work in async mode,\n        // So a deferred call won't always be invoked.\n        this._invokeAnimatedPropsCallbackOnMount = true;\n      } else if (typeof this._component.setNativeProps !== 'function') {\n        this.forceUpdate();\n      } else {\n        this._component.setNativeProps(this._propsAnimated.__getValue());\n      }\n    };\n\n    _attachProps(nextProps) {\n      const oldPropsAnimated = this._propsAnimated;\n\n      this._propsAnimated = createOrReusePropsNode(\n        nextProps,\n        this._animatedPropsCallback,\n        oldPropsAnimated\n      );\n      // If prop node has been reused we don't need to call into \"__detach\"\n      if (oldPropsAnimated !== this._propsAnimated) {\n        // When you call detach, it removes the element from the parent list\n        // of children. If it goes to 0, then the parent also detaches itself\n        // and so on.\n        // An optimization is to attach the new elements and THEN detach the old\n        // ones instead of detaching and THEN attaching.\n        // This way the intermediate state isn't to go to 0 and trigger\n        // this expensive recursive detaching to then re-attach everything on\n        // the very next operation.\n        oldPropsAnimated && oldPropsAnimated.__detach();\n      }\n    }\n\n    _updateFromNative(props) {\n      this._component.setNativeProps(props);\n    }\n\n    _attachPropUpdater() {\n      const viewTag = findNodeHandle(this);\n      NODE_MAPPING.set(viewTag, this);\n      if (NODE_MAPPING.size === 1) {\n        ReanimatedEventEmitter.addListener('onReanimatedPropsChange', listener);\n      }\n    }\n\n    _detachPropUpdater() {\n      const viewTag = findNodeHandle(this);\n      NODE_MAPPING.delete(viewTag);\n      if (NODE_MAPPING.size === 0) {\n        ReanimatedEventEmitter.removeAllListeners('onReanimatedPropsChange');\n      }\n    }\n\n    componentDidUpdate(prevProps) {\n      this._attachProps(this.props);\n      this._reattachNativeEvents(prevProps);\n\n      this._propsAnimated.setNativeView(this._component);\n    }\n\n    _setComponentRef = c => {\n      if (c !== this._component) {\n        this._component = c;\n      }\n    };\n\n    _filterNonAnimatedStyle(inputStyle) {\n      const style = {};\n      for (const key in inputStyle) {\n        const value = inputStyle[key];\n        if (!(value instanceof AnimatedNode) && key !== 'transform') {\n          style[key] = value;\n        }\n      }\n      return style;\n    }\n\n    _filterNonAnimatedProps(inputProps) {\n      const props = {};\n      for (const key in inputProps) {\n        const value = inputProps[key];\n        if (key === 'style') {\n          props[key] = this._filterNonAnimatedStyle(StyleSheet.flatten(value));\n        } else if (!(value instanceof AnimatedNode)) {\n          props[key] = value;\n        }\n      }\n      return props;\n    }\n\n    render() {\n      const props = this._filterNonAnimatedProps(this.props);\n      const platformProps = Platform.select({\n        web: {},\n        default: { collapsable: false },\n      });\n      return (\n        <Component {...props} ref={this._setComponentRef} {...platformProps} />\n      );\n    }\n\n    // A third party library can use getNode()\n    // to get the node reference of the decorated component\n    getNode() {\n      return this._component;\n    }\n  }\n\n  return AnimatedComponent;\n}\n"]},"metadata":{},"sourceType":"script"}