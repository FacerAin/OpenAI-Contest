{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.sendSearch=void 0;var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _filter=_interopRequireDefault(require(\"./filter\"));var axios=require('axios');var sendSearch=function sendSearch(searchText){return _regenerator.default.async(function sendSearch$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",new Promise(function(resolve,reject){if(searchText===\"\"||searchText.length>30){resolve({\"return_code\":-1,\"error_code\":\"검색 단어를 확인해 주세요!\"});}else{axios({headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\"},url:'http://34.84.91.190:80/api/cliConnection',data:{data:{text:searchText.replace(/\\s{1,}/g,' ')}},method:\"POST\"}).then(function(response){resolve((0,_filter.default)(response.data));clearTimeout(timer);}).catch(function(error){clearTimeout(timer);throw new Error(error);});}var timer=setTimeout(function(){throw new Error(\"time out\");},10000);}));case 1:case\"end\":return _context.stop();}}});};exports.sendSearch=sendSearch;","map":{"version":3,"sources":["C:/Users/bluej/Desktop/2_2/searchGuide/searchGuide/lib/api.js"],"names":["axios","require","sendSearch","searchText","Promise","resolve","reject","length","headers","url","data","text","replace","method","then","response","clearTimeout","timer","catch","error","Error","setTimeout"],"mappings":"qPACA,wDADA,GAAMA,CAAAA,KAAK,CAAGC,OAAO,CAAC,OAAD,CAArB,CAGO,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAMC,UAAN,uJACf,GAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAASC,MAAT,CAAoB,CACrC,GAAGH,UAAU,GAAI,EAAd,EAAoBA,UAAU,CAACI,MAAX,CAAoB,EAA3C,CAA+C,CAC7CF,OAAO,CAAC,CAAE,cAAgB,CAAC,CAAnB,CAAsB,aAAc,iBAApC,CAAD,CAAP,CACD,CAFD,IAEM,CACJL,KAAK,CACH,CACEQ,OAAO,CAAE,CACP,SAAU,kBADH,CAEP,eAAgB,kBAFT,CADX,CAKEC,GAAG,CAAE,0CALP,CAMEC,IAAI,CAAE,CACJA,IAAI,CAAC,CACHC,IAAI,CAAER,UAAU,CAACS,OAAX,CAAmB,SAAnB,CAA6B,GAA7B,CADH,CADD,CANR,CAWEC,MAAM,CAAE,MAXV,CADG,CAAL,CAeCC,IAfD,CAeM,SAACC,QAAD,CAAY,CAChBV,OAAO,CAAC,oBAAOU,QAAQ,CAACL,IAAhB,CAAD,CAAP,CACAM,YAAY,CAACC,KAAD,CAAZ,CACD,CAlBD,EAmBCC,KAnBD,CAmBO,SAAAC,KAAK,CAAI,CACdH,YAAY,CAACC,KAAD,CAAZ,CACA,KAAM,IAAIG,CAAAA,KAAJ,CAAUD,KAAV,CAAN,CACD,CAtBD,EAuBD,CACD,GAAIF,CAAAA,KAAK,CAAGI,UAAU,CAAE,UAAM,CAC1B,KAAM,IAAID,CAAAA,KAAJ,CAAW,UAAX,CAAN,CAA+B,CADb,CACe,KADf,CAAtB,CAED,CA9BM,CADe,gDAAnB,C","sourcesContent":["const axios = require('axios')\r\nimport filter from './filter';\r\n\r\nexport const sendSearch = async(searchText) => {\r\n    return new Promise((resolve,reject) => {\r\n      if(searchText=== \"\" || searchText.length > 30 ){\r\n        resolve({ \"return_code\" : -1, \"error_code\": \"검색 단어를 확인해 주세요!\" });\r\n      } else{\r\n        axios(\r\n          {\r\n            headers: {\r\n              \"Accept\": \"application/json\",\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n            url: 'http://34.84.91.190:80/api/cliConnection',\r\n            data: {\r\n              data:{\r\n                text: searchText.replace(/\\s{1,}/g,' ')\r\n              }\r\n            },\r\n            method: \"POST\",\r\n          }\r\n        )\r\n        .then((response)=>{\r\n          resolve(filter(response.data))\r\n          clearTimeout(timer);\r\n        })\r\n        .catch(error => {\r\n          clearTimeout(timer);\r\n          throw new Error(error);\r\n        });\r\n      }\r\n      let timer = setTimeout( () => {\r\n          throw new Error( \"time out\" );} ,10000)\r\n    })\r\n}"]},"metadata":{},"sourceType":"script"}